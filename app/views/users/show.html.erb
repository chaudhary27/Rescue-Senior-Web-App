<!-- <meta HTTP-EQUIV="REFRESH" content="15";> -->
<!-- <meta http-equiv="refresh" content="15" URL="http://localhost:3001"> -->
<!-- <meta http-equiv="refresh" content="15"; URL="http://localhost:3001"> -->
<script type="text/JavaScript">

// function timedRefresh(timeoutPeriod) {
//   setTimeout("location.reload(true);",timeoutPeriod);
//
// }
//
// window.onload = timedRefresh(10000);

</script>

<div class="container">
  <div class="row">
    <div class="col-md-3 text-center">
      <%= image_tag @user.profile.avatar.url, class: 'avatar-show-img' %>
    </div>
    
    <div class="col-md-6">
      <h1><%= @user.profile.first_name %>  <%= @user.profile.last_name %></h1> <br>
      <h3><span class="health-band-icon"><%= health_band_icon %></span> Tracking Health via <%= @user.profile.health_band %> <%= @ref.child(:device).val() %></h3>
      <h3><span> <i class="fa fa-battery-full" aria-hidden="true"></i></span> Battery level: <%= @ref.child(:device_battery).val() %></h3>
      <h3><a href="http://localhost:3000/users/1"><span class="label label-primary">Refresh Data</span></a></h3>
      <h3><a href="http://localhost:3001" target="_blank"><span class="label label-danger">Authenticate Fitbit</span></a></h3> <br>
      <div class="well profile-block profile-contact-info">
        <h3 class="text-center">Contact Information</h3> <br>
        <h4>Phone Number: <%= @user.profile.phone_number %> </h4>
        <h4>Age: <%= @user.profile.age %></h4>
        <h4>Height: <%= @user.profile.height_feet %>' <%= @user.profile.height_inches %>''</h4>
        <h4>Contact Email: <%= @user.profile.contact_email %></h4>
        <hr>
        <h3 class="text-center">Daily Metrics</h3>
        <h4>Last Synced: <span class="label label-danger"><%= @ref.child(:time_stamp).val() %></span></h4>
        <h4>Step Count: <span class="label label-success"><%= @ref.child(:steps_count).val() %></span></h4>
        <h4>Resting Heart Rate: <span class="label label-default"><%= @ref.child(:resting_heart_rate).val() %></span> BPM</h4>
        <h4>Inactive: <span class="label label-warning"><%= @ref.child(:inactive_minutes).val() %></span> mins</h4>
      </div>
    </div>
    
    
    
    <div class="col-md-6 col-md-offset-3">
      <div class="well profile-block profile-location-info">
        <h3 class="text-center">Realtime Indoor Location</h3><br>
        
        <% if (@beacon.child(:"0", :major).val == 16613 && @beacon.child(:"0", :minor).val == 25364) %>
        <h4>Indoor Location: <span class="label label-success"><%= @beacon_location_1 %></span></h4>
        <h4>Address: <%= @beacon_location_1_addrss %></h4>
        <h4><a href="https://www.google.com/maps/place/The+City+College+of+New+York:+North+Academic+Center/@40.8196351,-73.9527095,17z/data=!3m1!4b1!4m5!3m4!1s0x89c2f66570808709:0x9bad2a6bc19dfe6f!8m2!3d40.8196311!4d-73.9505155" target="_blank"><span class="label label-primary">Open Map</span></a></h4>
        
        <% elsif (@beacon.child(:"0", :major).val == 28803 && @beacon.child(:"0", :minor).val == 64459) %>
        <h4>Indoor Location: <span class="label label-success"><%= @beacon_location_2 %></span></h4>
        <h4>Address: <%= @beacon_location_2_addrss %></h4>
        <h4><a href="https://www.google.com/maps/place/The+City+College+of+New+York:+North+Academic+Center/@40.8196351,-73.9527095,17z/data=!3m1!4b1!4m5!3m4!1s0x89c2f66570808709:0x9bad2a6bc19dfe6f!8m2!3d40.8196311!4d-73.9505155" target="_blank"><span class="label label-primary">Open Map</span></a></h4>
        
        <% elsif (@beacon.child(:"0", :major).val == 11480 && @beacon.child(:"0", :minor).val == 44233) %>
        <h4>Indoor Location: <span class="label label-success"><%= @beacon_location_3 %></span></h4>
        <h4>Address: <%= @beacon_location_2_addrss %></h4>
        <h4><a href="https://www.google.com/maps/place/The+City+College+of+New+York:+North+Academic+Center/@40.8196351,-73.9527095,17z/data=!3m1!4b1!4m5!3m4!1s0x89c2f66570808709:0x9bad2a6bc19dfe6f!8m2!3d40.8196311!4d-73.9505155" target="_blank"><span class="label label-primary">Open Map</span></a></h4>
        <% end %>
        
        <h4>Proximity: <%= @beacon.child(:"0", :beacon, :proximity).val %></h4>
        <h4>Beacon rssi: <%= @beacon.child(:"0", :rssi).val %></h4>
        <h4>Beacon Tx: <%= @beacon.child(:"0", :beacon, :tx).val %></h4>
        <h4>Beacon Accuracy: <%= @beacon.child(:"0", :beacon, :accuracy).val %></h4>
        <h4>Beacon UUID: <%= @beacon.child(:"0", :beacon, :uuid).val %></h4>
        <h4>Beacon Manufacturer: Estimote</h4>
      </div>
    </div>
    
  </div>
</div>
